<!DOCTYPE html>
<html>
<head>
	<title>{% block title %}{% endblock %}</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta content="" name="description">
	<meta content="" name="keywords">

	{{ fontawesome_html() }}
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/nav.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/footer.css') }}">
	<!-- <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/owl.carousel.css') }}"> -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/main.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/datatables.min.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/toaster.min.css') }}">
	<!-- <link href="{{ url_for('static', filename='home/assets/css/style.css') }}" rel="stylesheet"> -->

	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />
	<!-- Favicons -->
	<link href="{{ url_for('static', filename='home/assets/img/favicon.ico') }}" rel="icon">
	<link href="{{ url_for('static', filename='home/assets/img/apple-touch-icon.png') }}" rel="apple-touch-icon">

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

	<!-- Vendor CSS Files -->
	<link href="{{ url_for('static', filename='home/assets/vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
	<link href="{{ url_for('static', filename='home/assets/vendor/icofont/icofont.min.css') }}" rel="stylesheet">
	<link href="{{ url_for('static', filename='home/assets/vendor/boxicons/css/boxicons.min.css') }}" rel="stylesheet">
	<link href="{{ url_for('static', filename='home/assets/vendor/animate.css/animate.min.css') }}" rel="stylesheet">
	<link href="{{ url_for('static', filename='home/assets/vendor/venobox/venobox.css') }}" rel="stylesheet">
	<link href="{{ url_for('static', filename='home/assets/vendor/owl.carousel/assets/owl.carousel.min.css') }}" rel="stylesheet">

	<!-- Template Main CSS File -->
	<link href="{{ url_for('static', filename='home/assets/css/style.css') }}" rel="stylesheet">
	
	<script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.5.1.min.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/dateFormat.min.js') }}"></script>
	
	<!-- NOTIFY JS -->
	<script src="{{ url_for('static', filename='vendor/notify/notify.js') }}"></script>

	<!-- asteroid js toaster -->
	<script src="{{ url_for('static', filename='vendor/asteroid/as-min.js') }}"></script>

	<!-- loading.io -->
	<link rel="stylesheet" href="{{ url_for('static', filename='vendor/ldld/ldld.css') }}">
	<script src="{{ url_for('static', filename='vendor/ldld/ldld.js') }}"></script>

	<script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>

	<style>
		li {
			list-style-type: none;
		}
		.btn-circle.btn-sm { 
            width: 30px; 
            height: 30px; 
            padding: 6px 0px; 
            border-radius: 15px; 
            font-size: 8px; 
            text-align: center; 
        } 
        .btn-circle.btn-md { 
            width: 50px; 
            height: 50px; 
            padding: 7px 10px; 
            border-radius: 25px; 
            font-size: 10px; 
            text-align: center; 
        } 
        .btn-circle.btn-xl { 
            width: 70px; 
            height: 70px; 
            padding: 10px 16px; 
            border-radius: 35px; 
            font-size: 12px; 
            text-align: center; 
        } 
		#webMain {
			margin-top: 6%;
		}

		.fullscreen {  
			height: 100%;
			width: 100%;
			position: fixed; /* Stay in place */
			z-index: 1000000; /* Sit on top */
			left: 0;
			top: 0;
			/* background-color: rgb(0,0,0); 
			background-color: rgba(0,0,0, 0.9);  */
			/* background-color: rgb(22, 42, 49); */
			background-color: #3693b7;
			overflow-x: show; /* Disable horizontal scroll */
			overflow-y: scroll;
			transition: 0.5s; /* 0.5 second transition effect to slide in or slide down the overlay (height or width, depending on reveal) */
		}
		.mytestclass{
			background: #304CD8;
			background: -webkit-linear-gradient(left, #304CD8 0%, #9F3762 100%);
			background: -ms-linear-gradient(left, #304CD8 0%, #9F3762 100%);
			background: linear-gradient(to right, #304CD8 0%, #9F3762 100%);
			color: #fff;
			font-size: 25px;
			padding: 35px;
			text-align: center;
		}
		.alert_notification {
			margin-top: -5px !important;
			clear: both;
		}


		.dropdown-toggle:after { content: none }

	</style>

	<!-- leafletJS -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
	<!-- end leafletJS -->

	{% block head %}{% endblock %}
</head>
<body class="d-flex flex-column">
	<!-- nav -->
	{% include 'nav.html' %}
	<!-- end nav -->

	<!-- ASIDE -->
	{% include 'aside.html' %}
	<!-- END ASIDE -->

	<main id="webMain">
		<div class="container">
			<br>
			{% block body %} {% endblock %}
		</div>

		<br>
	
		  <!-- ======= Footer ======= -->
			<footer id="footer">
				{% if 'email' not in session %}
				<!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-3 col-md-6">
            <div class="footer-info">
              <h3>GSM Surge Warner</h3>
              <p>
                Web Naive<br><br>
                <strong>Phone:</strong> 09506305568<br>
                <strong>Email:</strong> cg@domain.com<br>
              </p>
              <div class="social-links mt-3">
                <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
                <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
                <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
                <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
                <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
              </div>
            </div>
          </div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="/">Home</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#about">About</a></li>
            </ul>
          </div>

          <div class="col-lg-3 col-md-6 footer-links">
            <h4>Our Services</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="#">SMS</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">GRAPH</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">MAP</a></li>
            </ul>
          </div>

          <div class="col-lg-4 col-md-6 footer-newsletter">
            <h4>Our Newsletter</h4>
            <p>We introduce you to the future risk reduction aids.</p>
            <!-- <form action="" method="post">
              <input type="email" name="email"><input type="submit" value="Subscribe">
            </form> -->

          </div>

        </div>
      </div>
    </div>
  </footer><!-- End Footer -->
				{% endif %}
			
				<div class="container">
					<div class="copyright">
						&copy; Copyright <strong><span>GSM Surge Warner</span></strong>. All Rights Reserved
					</div>
					<div class="credits">
						Designed by <a href="#">Web Naive</a>
					</div>
				</div>
			</footer><!-- End Footer -->
	</main>

	<!-- <div class="border rounded bg-danger" style="z-index: 30230; position: fixed; bottom: unset; margin-top: 100px;">
		<p>
			Ther
		</p>
	</div> -->


	<script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/pooper.min.js') }}"></script>
	<!-- <script type="text/javascript" src="{{ url_for('static', filename='js/owl.carousel.js') }}"></script> -->
	<!-- <script type="text/javascript" src="{{ url_for('static', filename='js/shieldui-all.min.js') }}"></script> -->
	<script type="text/javascript" src="{{ url_for('static', filename='js/toaster.min.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/main2.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/receive.js') }}"></script>
	<!-- <script type="text/javascript" src="{{ url_for('static', filename='js/datatables.min.js') }}"></script> -->
	<!-- <script type="text/javascript" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script> -->
	<script src="{{ url_for('static', filename='js/moment.js') }}"></script>
	<script src="{{ url_for('static', filename='js/moment-with-locals.js') }}"></script>

	<script>
		// $.notify("Hello World!", {class:"mytestclass", delay:0, align:"left", verticalAlign:"left", animationType:"scale"});

		$(document).ready(function(){
			
			function queryAlert(){
				$.ajax({
					url:'/sms/unread',
					method:'post',
					data:{},
					success:function(datas) {
						var div = "";
						datas.forEach(data => {
							div += "<div class='dropdown-item container-fluid border rounded'>";
								div += "<div>";
									div += "<span>";
										if (data.alert_type == 1) {
											div += "<span class='fas fa-circle text-info'></span>";
										}
										else if (data.alert_type == 2) {
											div += "<span class='fas fa-circle text-yellow'></span>";
										}
										else if (data.alert_type == 3) {
											div += "<span class='fas fa-circle text-warning'></span>";
										}
										else if (data.alert_type == 4) {
											div += "<span class='fas fa-circle text-danger'></span>";
										}
										div += "<small> "+data.transmitter.name+"</small>";
									div += "</span>";
									div += "<br>";
									div += "<small>";
										div += "<small>";
											div += "<span>Water level: </span>";
											div += "<span class='text-muted'>"+ data.water_distance +"cm from sensor</span>"
										div += "</small>";
										div += "<br>";
										div += "<small>";
											div += "<span>Location: </span>";
											div += "<span class='text-muted'>"+data.transmitter.location+"</span>";
										div += "</small>";
										div += "<div class='text-center'>";
											div += "<small class='text-info'>"+data.date_sent+"</small>";
										div += "</div>";
									div += "</small>";
								div += "</div>";
							div += "</div>";
						});
						$("#alert_notification_holder").html(div);
					}
				})
			}

			function queryExtraSms(){
				$.ajax({
					url:'/extrasms/unread',
					method:'post',
					data:{},
					success:function(datas){
						var div = "";
						datas.forEach(data=>{
							div += '<div class="dropdown-item border rounded">';
								div += '<span class="fas fa-user-circle"></span>';
								div += '<small>'+data.number+'</small>';
								div += '<br>';
								div += '<small>';
									div += '<small class="textdot">'+data.message+'</small>';
								div += '</small>';
							div += '</div>';
						});
						$("#extrasms_notification_holder").html(div);
					}
				});
			}

			function queryAlertCount()
			{
				$.ajax({
					url:'/sms/unread_count',
					method:'post',
					data:{},
					success:function(count){
						if (count != 0)
						{
							$(".alert_notification").text(count);
							queryAlert();
						}
					}
				})
			}

			setInterval(queryAlertCount, 3000);

			function queryExtraSms_Count()
			{
				$.ajax({
					url:'/extrasms/unread_count',
					method:'post',
					data:{},
					success:function(count){
						if (count != 0){
							$(".extrasms_notification").html(count);
							queryExtraSms();
						}
					}
				})
			}

			setInterval(queryExtraSms_Count, 1500);

			queryAlert();

			queryExtraSms();

			var name = $('.textdot').text();
			if (name.length > 15) {
				var shortname = name.substring(0, 15) + " ...";
				$('.textdot').replaceWith(shortname);
			}

			$("#back").on("click", function(){
				window.history.back();
			})

			$("#seeAllExtra").on('click', function(){
				window.location = "/extrasms";
			})

			$("#seeAllAlerts").on('click', function(){
				window.location = "/sms";
			})
		})

	</script>

	{% block script %}{% endblock %}
</body>
</html>
